<?xml version="1.0" encoding="UTF-8"?>


<launch>
  <node pkg="rosserial_python" type="serial_node.py" name="serial_node">
    <param name="port" value="/dev/ttyACM1"/>
    <param name="baud" value="115200"/>
 </node>



 <param name="robot_description" command="$(find xacro)/xacro '$(find titan_description)/urdf/titan.xacro' --inorder"/>


  <include file="$(find titan_control)/launch/titan_control.launch" />	

  <!-- load the controllers -->

  <node name="titan_base_node" pkg="titan_base" type="titan_base_node" respawn="false" output="screen"/>

  
  <node pkg="robot_localization" type="ekf_localization_node" name="ekf_se" clear_params="true">
    <rosparam command="load" file="$(find titan_navigation)/config/ekf_localization.yaml" />
    <remap from="odometry/filtered" to="odom"/>
  </node>


  <node pkg="xv_11_laser_driver" type="neato_laser_publisher" name="xv_11_node">                                                                                                                         
    <param name="port" value="/dev/ttyACM0"/>
    <param name="firmware_version" value="2"/>
    <param name="frame_id" value="laser_link"/>
  </node>

  <node name="map_server" pkg="map_server" type="map_server" args="$(find titan_navigation)/map/hallway.yaml"/>


  <!-- <include file="$(find amcl)/examples/amcl_diff.launch" /> -->

  <include file="$(find titan_navigation)/launch/amcl.launch" />

  <!-- Move base -->
   <include file="$(find titan_navigation)/launch/move_base.launch">
   <remap from="cmd_vel" to="/titan_velocity_controller/cmd_vel"/>

  </include>


</launch>




